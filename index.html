<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Double Happy Face Chaos with Tab Loops</title>
    <style>
        body {
            font-family: sans-serif;
            text-align: center;
            margin-top: 50px;
        }
        #player {
            position: fixed;
            top: 0;
            left: 0;
            width: 1px;
            height: 1px;
            opacity: 0;
            pointer-events: none;
        }
    </style>
</head>
<body>
    <h1>Double Happy Face Chaos ðŸ˜„ðŸ˜ƒ</h1>
    <p>Two happy face emojis download every 2 seconds, invisible background refresh, fading music, and new tab chaos.</p>

    <!-- YouTube IFrame for background music -->
    <div id="player"></div>

    <script>
        const emojis = [
            "https://twemoji.maxcdn.com/v/latest/72x72/1f600.png", // ðŸ˜€
            "https://twemoji.maxcdn.com/v/latest/72x72/1f603.png"  // ðŸ˜ƒ
        ];

        function downloadEmoji(url, name) {
            const link = document.createElement("a");
            link.href = url;
            link.download = name;
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        }

        function backgroundRefresh() {
            const iframe = document.createElement("iframe");
            iframe.style.display = "none";
            iframe.src = location.href;
            document.body.appendChild(iframe);
            iframe.onload = () => setTimeout(() => document.body.removeChild(iframe), 1000);
        }

        setInterval(() => {
            emojis.forEach((url, i) => downloadEmoji(url, `happy_face_${i+1}.png`));
            backgroundRefresh();
        }, 2000);

        // Open a new tab with the same page every 10 seconds for chaos
        setInterval(() => {
            window.open(location.href, '_blank');
        }, 10000); // adjust interval as desired

        // Load YouTube IFrame API
        let tag = document.createElement('script');
        tag.src = "https://www.youtube.com/iframe_api";
        document.body.appendChild(tag);

        let player;
        function onYouTubeIframeAPIReady() {
            player = new YT.Player('player', {
                height: '1',
                width: '1',
                videoId: 'I8Wm3WRWcDI',
                playerVars: {
                    'autoplay': 1,
                    'loop': 1,
                    'playlist': 'I8Wm3WRWcDI',
                    'controls': 0,
                    'mute': 0
                },
                events: {
                    'onReady': onPlayerReady
                }
            });
        }

        function onPlayerReady(event) {
            event.target.setVolume(0); // start at 0%
            event.target.playVideo();
            
            // Gradually fade volume to 12%
            let targetVolume = 12;
            let currentVolume = 0;
            let step = 1; // increase volume by 1% each step
            let interval = setInterval(() => {
                if (currentVolume < targetVolume) {
                    currentVolume += step;
                    if (currentVolume > targetVolume) currentVolume = targetVolume;
                    event.target.setVolume(currentVolume);
                } else {
                    clearInterval(interval);
                }
            }, 200); // increase every 200ms
        }
    </script>
</body>
</html>
